generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url=env("DATABASE_URL")
}

enum AuctionStatus {
  UPCOMING
  ACTIVE
  CLOSED
}

model User {
  id            String     @id @default(cuid())
  name          String?    
  email         String     @unique
  avatarUrl     String?
  provider      String?
  createdAt     DateTime   @default(now())

  auctions      AuctionItem[]
  bids          Bid[]
}

model AuctionItem {
  id            String            @id @default(cuid())
  title         String     
  description   String
  imageUrl      String
  startPrice    Int
  currentPrice  Int               @default(0)
  status        AuctionStatus     @default(UPCOMING)
  startTime     DateTime
  endTime       DateTime
  createdAt     DateTime          @default(now())

  seller        User              @relation(fields:[sellerId], references:[id])
  sellerId      String

  bids          Bid[]
}

model Bid {
  id            String            @id @default(cuid())
  amount        Int
  createdAt     DateTime          @default(now())

  user          User              @relation(fields:[userId], references:[id])
  userId        String

  auction       AuctionItem       @relation(fields:[auctionId], references:[id])
  auctionId     String
}